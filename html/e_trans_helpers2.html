<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>e_trans_helpers2</title>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML" async>
  </script>
  
  <link href="lecture.css" rel="stylesheet">
  
  <link href="colorful.css" rel="stylesheet">
  

</head>
<body>
<div id="wrapper">
<div id="content">
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      For any integer polynomial $f$ and $n\in\mathbb N$ we define `deriv_n f n` to be the $n$-th derivative of polynomial $f$. $h^{[n]}$ means $h\circ h\circ h\cdots\circ h$ $n$-times.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">^</span><span class="o">[</span><span class="n">n</span><span class="o">]</span> <span class="n">f</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>the zeroth derivative of polynomial $f$ is $f$ itself.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">zeroth_deriv</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This is purely definition of <code>deriv_n f n</code> We also used $f^{[n]}=\mathrm{id}$ and $\mathrm{id} x = x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">id</span><span class="bp">.</span><span class="n">def</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>the derivative of $f^{(n)}$ is $f^{(n+1)}$</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_succ</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">By definition and $h^{[n+1]}=h\circ h^{[n]}$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="o">[</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_succ&#39;</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>the $n$-th derivative of zero polynomial is $0$</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_zero_p</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">deriv_n</span> <span class="mi">0</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove by induction. Base case and inductive case can all be done with <code>simp</code></span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="bp">;</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">id</span><span class="bp">.</span><span class="n">def</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_zero</span><span class="o">],</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="mi">0</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>If the $n$-th coefficient of $f$ is $a_n$, then the $n$-th coefficient in $f^{(k)}$ is $\left(\prod_{i=0}^{k-1} (n+k-i)\right)a_{n+k}$</p>
<pre><code>
</code></pre>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_n_coeff</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">k</span><span class="bp">-</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">k</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">So we use induction on $k$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">k</span> <span class="n">ih</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="mi">0</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For the zeroth derivative, $f^{(0)}=f$. This case is true by <code>simp</code>.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_zero</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">nat_zero_eq_zero</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range_zero</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_empty</span><span class="o">],</span> <span class="n">rw</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">forall_const</span><span class="o">,</span> <span class="n">id</span><span class="bp">.</span><span class="n">def</span><span class="o">,</span> <span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="mi">0</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Let us assume our claim is true for $k$ and consider the $m$-th coefficient.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">intro</span> <span class="n">m</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We know that $f^{(k+1)}=\left(f^{(k)}\right)'$ and for any polynomial $g$, the $m$-th coefficient of $g'$ is $(m+1)\times (m+1)$-th coefficient of $g$. Then we can use induction hypothesis with $m+1$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="o">[</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_succ&#39;</span><span class="o">],</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">function</span><span class="bp">.</span><span class="n">comp_app</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">],</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">deriv_n</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff_derivative</span><span class="o">,</span> <span class="n">rw</span> <span class="n">ih</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_range_succ</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_cast_eq_coe_nat</span><span class="o">],</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">The rest of the proves are trivial to a pair of human eyes. But we need to give computers some hint to solve this triviality.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">((</span><span class="n">m</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">sub_left_inj</span><span class="o">],</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">replace</span> <span class="n">triv</span> <span class="o">:</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="n">k</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">add_sub_assoc</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_sub_cancel&#39;</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">replace</span> <span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>Like first derivative, higher derivatives still respect addition</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_n_add</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span><span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span><span class="bp">+</span><span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>For any polynomial $f$ with degree $d$, the $d+1$-th derivative is zero.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">deriv_too_much</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove that all coefficient of $f^{(d+1)}$ is zero.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">ext</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We use lemma <code>deriv_n_coeff</code> and all coefficient of zero polynomial is $0$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">deriv_n_coeff</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff_zero</span><span class="o">,</span> <span class="n">mul_eq_zero</span><span class="o">],</span> <span class="n">right</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Then the problem reduces to prove that $d+1$-th coeffcient of $f$ is zero. But $f$ has degree $d$. So we just need $d&lt;d+1$. This is proved by <code>linarith</code>.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff_eq_zero_of_nat_degree_lt</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>if $i+1\le n$ then $n-(i+1)+1=n-i$</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">private</span> <span class="kn">lemma</span> <span class="n">nat_sub_eq</span> <span class="o">(</span><span class="n">n</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">i</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>We have the pascal triangle</p>
<p>
\[{n\choose k+1}+{n\choose k} = {n+1\choose k+1}\]
</p>


	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">private</span> <span class="kn">lemma</span> <span class="n">pascal_triangle</span> <span class="o">(</span><span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This is actually how <code>mathlib</code> defined binomial coefficient.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">exact</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">choose</span> <span class="n">n</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">choose</span> <span class="n">n</span> <span class="n">k</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>We also have that for $p,q\in\mathbb Z[x]$,</p>
<p>
\[
    (p\times q)^{(n)} = \sum_{i=0}^n\left({n\choose i}p^{(i)}q^{(n-i)}\right)    
\]

        




</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">deriv_n_poly_prod</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span> <span class="err">∑</span> <span class="n">k</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="n">k</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove by induction on $n$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">IH</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">1</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For $n=0$, we are using <code>zeroth_deriv</code>.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zeroth_deriv</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_self</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_coe_nat</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_one</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_singleton</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range_one</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">1</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For inductive case We use $(pq)^{(n+1)}=d(pq)^{(n)}$, inductive hypothesis and that derivative is linear.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_succ&#39;</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">deriv_n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">IH</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_sum</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_mul</span><span class="o">,</span> <span class="n">zero_mul</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_C</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_sum</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_mul</span><span class="o">,</span> <span class="n">zero_mul</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_C</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">],</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">The rest of the proves is essentially openning and closing brackets and renaming summing indeces.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_add_distrib</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">+</span>
      <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">conv_lhs</span> <span class="o">{</span><span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ&#39;</span><span class="o">,</span> <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zeroth_deriv</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_self</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_zero_right</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_zero</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_self</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C_1</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_zero</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">]},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">+</span>
      <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">))</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="o">[</span><span class="n">eq</span><span class="o">,</span> <span class="bp">&lt;-</span><span class="n">finset</span><span class="bp">.</span><span class="n">sum_add_distrib</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>           <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>           <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_congr</span><span class="o">,</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">intros</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_succ</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_coe_nat</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">,</span> <span class="n">add_left_inj</span><span class="o">],</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">]</span> <span class="n">at</span> <span class="n">hi</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">replace</span> <span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">hi</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">rw</span> <span class="n">nat_sub_eq</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hi</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>           <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">))))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">funext_iff</span><span class="o">,</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">funext_iff</span><span class="o">,</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_add</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">((</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">funext_iff</span><span class="o">,</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">pascal_triangle</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_add</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">conv_rhs</span> <span class="o">{</span><span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ&#39;</span><span class="o">,</span> <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ</span><span class="o">},</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_succ</span><span class="o">,</span> <span class="n">zeroth_deriv</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_self</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_coe_nat</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_sub_succ_eq_sub</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_zero_right</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_zero</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_self</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_one</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_zero</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">],</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>For a polynomial $f$ then if $n&gt;0$, we have $f^{(n)}=f^{(n-1)}\times f'$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">poly_pow_deriv</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>fundamental theorem of calculus and integration by part is assumed. I am waiting for them to arrive in <code>mathlib</code> and I will update this part and prove relatvent additional assumptions.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">axiom</span> <span class="n">ftc</span> <span class="o">(</span><span class="n">f</span><span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span>  <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">deriv</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">-</span> <span class="n">f</span> <span class="n">a</span>
<span class="kn">axiom</span> <span class="n">integrate_by_part</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span>
    <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">deriv</span> <span class="n">g</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">g</span> <span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">deriv</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">))</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Let $f,g:\mathbb R\to\mathbb R$ be measurable and integral functions such that $\forall x\in(a,b),0\le f(x)\le g(x)$, then
$$
\int_a^b f(x)\mathrm{d}x\le\int_a^b g(x)\mathrm{d}x
$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">integral_le_integral&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">{</span><span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text"><code>mathlib</code> has <code>measure_theory.integral_le_integral</code> built in, but it is not for set integral. So we apply this theorem to <code>((set.Icc a b).indicator f)</code> and <code>((set.Icc a b).indicator g)</code> <code>s.indicator f</code> is the function  (λ x, if x ∈ s then f x else 0) We need to prove <code>((set.Icc a b).indicator f)</code> and <code>((set.Icc a b).indicator g)</code> are measurable and integrable. These are pretty much built in.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="bp">@</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral_le_integral</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measurable</span><span class="bp">.</span><span class="k">if</span><span class="o">,</span> <span class="n">apply</span> <span class="n">is_measurable_Icc</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">6</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">dsimp</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">measurable_zero</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">6</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span><span class="bp">.</span><span class="n">integrable_on</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measurable</span><span class="bp">.</span><span class="k">if</span><span class="o">,</span> <span class="n">apply</span> <span class="n">is_measurable_Icc</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">measurable_zero</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span><span class="bp">.</span><span class="n">integrable_on</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">intros</span> <span class="n">c</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">hf</span> <span class="n">c</span> <span class="bp">⟨</span><span class="n">h_1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">h_1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">le_refl</span> <span class="mi">0</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>integrations on a set $S$ of two identical functions are indentical</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">same_integral</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">-&gt;</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">S</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">S</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>If $f$ and $g$ are identical on $S$ then
$$
\int_S f = \int_S g
$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">same_integral&#39;&#39;</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="bp">-&gt;</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">S</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">S</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>integrations of two identical functions are indentical</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">same_integral&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">-&gt;</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="n">x</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">congr_arg</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span> <span class="n">h</span><span class="o">)</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>identical function have identical derivatives</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">same_deriv</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">-&gt;</span> <span class="n">deriv</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="n">g</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">deriv</span> <span class="n">h</span><span class="o">)</span> <span class="n">x</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$$
\int_S (-f)=-\int_S f
$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">integral_neg&#39;</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">S</span><span class="o">,</span> <span class="bp">-</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span> <span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">S</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">integral_on_neg</span> <span class="n">S</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>integration of a constant function:
$$
\int_a^b c=(b-a)c
$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">integral_constant</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">):</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Constant function $c$ on closed interval $(a,b)$ is integrable.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">integrable_const_Icc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">c</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We build a simple function $f$ to be $c\times 1_{(a,b)}$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>  <span class="n">set</span> <span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a_1</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">This function is measurable</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">measurable_sn</span> <span class="o">:=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">begin</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">),</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">So we need to prove $f^{-1}(x)$ is a measurable set for all $x$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">intros</span> <span class="n">x</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">),</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">by_cases</span> <span class="o">(</span><span class="n">c</span><span class="bp">=</span><span class="mi">0</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">if $c=0$, then the preimage is either the whole set or $\emptyset$. Both are measurable.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">rw</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">if_t_t</span><span class="o">,</span> <span class="n">norm_zero</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">],</span> <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">preimage_const</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="mi">0</span> <span class="err">∈</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∅</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">split_ifs</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_measurable</span><span class="bp">.</span><span class="n">univ</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_measurable</span><span class="bp">.</span><span class="n">empty</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="mi">0</span> <span class="err">∈</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∅</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">if $c\ne 0$ then $c&gt;0$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="k">have</span> <span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="n">exact</span> <span class="n">lt_of_le_of_ne</span> <span class="n">c_nonneg</span> <span class="o">(</span><span class="n">ne</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">by_cases</span> <span class="n">H</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="bp">=</span><span class="mi">0</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">if $x$ is zero, then the preimage is $\mathbb R-(a,b)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">rw</span> <span class="n">H</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="k">have</span> <span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_eq_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">singleton_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span> <span class="err">⊢</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="n">split_ifs</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">not_and</span><span class="o">,</span> <span class="n">not_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">h_1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="n">suffices</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">exact</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_compl</span> <span class="n">this</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">not_and</span><span class="o">,</span> <span class="n">not_le</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">],</span> <span class="n">intro</span> <span class="n">rid</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">,</span>
<span class="n">rid</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">y</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="n">replace</span> <span class="n">h_1</span> <span class="o">:=</span> <span class="n">h_1</span> <span class="n">rid</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h_1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">,</span>
<span class="n">rid</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">y</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">not_and</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_eq_zero</span><span class="o">,</span> <span class="n">not_le</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">singleton_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_compl_eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span> <span class="err">⊢</span><span class="o">,</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">replace</span> <span class="n">hy</span> <span class="o">:=</span> <span class="n">hy</span> <span class="n">h_1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">replace</span> <span class="n">h_1</span> <span class="o">:=</span> <span class="n">h_1</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span> <span class="n">exact</span> <span class="n">le_refl</span> <span class="mi">0</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="o">},</span> <span class="n">rw</span> <span class="n">set1</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But complement of a set is measurable if and only if that set is measurable. any closed interval is measurable.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">rw</span> <span class="n">is_measurable</span><span class="bp">.</span><span class="n">compl_iff</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_measurable_Icc</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="err">ᶜ</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">if $x\ne 0$. We analysis by whether $x=c$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">by_cases</span> <span class="o">(</span><span class="n">x</span><span class="bp">=</span><span class="o">(</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">)),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">if $x=c$, then preimage is $(a,b)$ and closed intervals are measurable.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="n">rw</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="k">have</span> <span class="n">set1</span> <span class="o">:</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_singleton_iff</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span> <span class="err">⊢</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span>
  <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">split_ifs</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span>
  <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span>
  <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">replace</span> <span class="n">hy</span> <span class="o">:=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_eq_zero</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">hy</span><span class="o">),</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span>
  <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span>
  <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">intro</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_singleton_iff</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">],</span> <span class="n">split_ifs</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span>
  <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">refl</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="o">},</span> <span class="n">rw</span> <span class="n">set1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_measurable_Icc</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">if $x\ne c$, then the preimage is $\emptyset$ which is measurable.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="k">have</span> <span class="n">set2</span> <span class="o">:</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span> <span class="bp">=</span> <span class="err">∅</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="bp">=</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="bp">=</span> <span class="err">∅</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="bp">=</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="bp">=</span> <span class="err">∅</span>
<span class="err">⊢</span> <span class="n">is_measurable</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="bp">=</span> <span class="err">∅</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_singleton_iff</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="bp">=</span> <span class="err">∅</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">split_ifs</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">hy</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">not_true</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">false</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">exfalso</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">false</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">exact</span> <span class="n">H</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">hy</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h_1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>                <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_empty_eq</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_pos</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>              <span class="o">},</span> <span class="n">rw</span> <span class="n">set2</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_measurable</span><span class="bp">.</span><span class="n">empty</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="kn">end</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">The range of this function is finite.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">finite</span> <span class="o">:=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">begin</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)))</span><span class="bp">.</span><span class="n">finite</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">in fact range is {c,0}.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)))</span><span class="bp">.</span><span class="n">finite</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)))</span><span class="bp">.</span><span class="n">finite</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)))</span><span class="bp">.</span><span class="n">finite</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">ext</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">intros</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_insert_iff</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">singleton_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span> <span class="err">⊢</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">choose</span> <span class="n">y</span> <span class="n">hy</span> <span class="kn">using</span> <span class="n">hx</span><span class="o">,</span> <span class="n">split_ifs</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">hy</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">exact</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
<span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">intros</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_insert_iff</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">singleton_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span> <span class="err">⊢</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">cases</span> <span class="n">hx</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">use</span> <span class="n">a</span><span class="o">,</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">forall_prop_of_true</span><span class="o">,</span> <span class="n">not_and</span><span class="o">,</span> <span class="n">not_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">use</span> <span class="n">b</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="k">have</span> <span class="n">rid1</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="k">have</span> <span class="n">rid2</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_le_iff_nonpos_right</span><span class="o">,</span> <span class="n">not_and</span><span class="o">,</span> <span class="n">not_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">rw</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">set1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span><span class="bp">.</span><span class="n">finite</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite</span><span class="bp">.</span><span class="n">insert</span><span class="o">,</span> <span class="n">exact</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite_singleton</span> <span class="mi">0</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span> <span class="mi">0</span><span class="o">}</span><span class="bp">.</span><span class="n">finite</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="kn">end</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">}</span> <span class="k">with</span> <span class="n">hf_simp</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">}</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)),</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">f_simp</span><span class="o">],</span> <span class="n">refl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">}</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_insert</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_singleton</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span> <span class="err">⊢</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">choose</span> <span class="n">x</span> <span class="n">hx</span> <span class="kn">using</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="o">(</span><span class="n">f_simp</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="n">x</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="o">[</span><span class="bp">&lt;-</span><span class="n">f_simp_to_fun</span><span class="o">],</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="n">x</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">hx</span> <span class="n">at</span> <span class="n">triv</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[]</span> <span class="n">at</span> <span class="n">triv</span><span class="o">,</span> <span class="n">split_ifs</span> <span class="n">at</span> <span class="n">triv</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">exact</span> <span class="n">triv</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">triv</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">triv</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_insert</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_singleton</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">use</span> <span class="n">b</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="n">f_simp</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="o">(</span><span class="n">b</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span> <span class="n">rw</span> <span class="n">f_simp_to_fun</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">split_ifs</span><span class="o">,</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_le_iff_nonpos_right</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="k">have</span> <span class="n">rid1</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="k">have</span> <span class="n">rid2</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">use</span> <span class="n">a</span><span class="o">,</span> <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">a</span><span class="o">,</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span> <span class="n">rw</span> <span class="n">f_simp_to_fun</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[],</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">a</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">left_mem_Icc</span><span class="o">,</span> <span class="n">not_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">a</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">So we replace our function with the simple function. Because we can actually compute integral of simple functions.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f_simp</span> <span class="n">a_1</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">apply</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">lintegral_congr</span><span class="o">,</span> <span class="n">intro</span> <span class="n">x</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">f_simp</span><span class="o">,</span> <span class="n">if_t_t</span><span class="o">,</span> <span class="n">forall_prop_of_true</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_empty_eq</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">,</span> <span class="n">norm_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_insert_iff</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">,</span> <span class="n">not_and</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_singleton_iff</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_eq_zero</span><span class="o">,</span> <span class="n">not_le</span><span class="o">,</span> <span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">not_true</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite_singleton</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite</span><span class="bp">.</span><span class="n">insert</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_zero</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">singleton_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_compl_eq</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">,</span> <span class="n">neg_zero</span><span class="o">],</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">by_cases</span> <span class="n">c_zero</span> <span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">If $c=0$, this is trival, as 0 function is integrable</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">c_zero</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">indicator_zero</span><span class="o">,</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable_iff_norm</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">a_1</span><span class="err">∥</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp_rw</span> <span class="n">norm_indicator_eq_indicator_norm</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">a_1</span><span class="err">∥</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span><span class="o">)</span> <span class="n">a_1</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span><span class="o">)</span> <span class="n">a_1</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span> <span class="n">rw</span> <span class="n">real</span><span class="bp">.</span><span class="n">norm_eq_abs</span><span class="o">,</span> <span class="n">rw</span> <span class="n">abs_of_nonneg</span><span class="o">,</span> <span class="n">exact</span> <span class="n">c_nonneg</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">If $c\ne 0$, then we need to prove $$\sum_{x\in \mathrm{im}f} x\times \mathrm{vol}(f^{-1}(\{x\}))&lt;\infty$$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp_rw</span> <span class="o">[</span><span class="n">triv</span><span class="o">],</span> <span class="n">rw</span> <span class="n">eq2</span><span class="o">,</span> <span class="n">rw</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span><span class="bp">.</span><span class="n">lintegral_eq_integral</span><span class="o">,</span> <span class="n">rw</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span><span class="bp">.</span><span class="n">integral</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">)</span> <span class="k">in</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span><span class="o">,</span> <span class="n">x</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">So it is sufficient to show $$\forall x\in\mathrm{im}f,x\times \mathrm{vol}(f^{-1}(\{x\}))&lt;\infty$$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">sum_lt_top</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">)</span> <span class="k">in</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span><span class="o">,</span> <span class="n">x</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">x</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">),</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">a</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">intros</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">),</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">a</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But $\mathrm{im} f=\{0,c\}$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">f_simp_range</span> <span class="n">at</span> <span class="n">hz</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_insert</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_singleton</span><span class="o">]</span> <span class="n">at</span> <span class="n">hz</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="err">∈</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">cases</span> <span class="n">hz</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>

<span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For $x=0$, $x\times \mathrm{vol}(f^{-1}(\{x\}))=0&lt;\infty$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">hz</span><span class="o">,</span> <span class="n">rw</span> <span class="n">zero_mul</span><span class="o">,</span> <span class="n">exact</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">zero_lt_top</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For $x=c$, $f^{-1}(\{x\})=(a,b)$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">hz</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">z</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">z</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">set1</span> <span class="o">:</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">})</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">intro</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_singleton_iff</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span> <span class="err">⊢</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="o">(</span><span class="n">f_simp</span> <span class="n">y</span><span class="o">)</span>  <span class="bp">=</span> <span class="o">(</span><span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">),</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">rw</span> <span class="n">triv</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">rw</span> <span class="n">f_simp_to_fun</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">split_ifs</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">replace</span> <span class="n">hy</span> <span class="o">:=</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_eq_zero</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span> <span class="n">exfalso</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">≤</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">false</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">,</span> <span class="n">exact</span> <span class="n">lt_of_le_of_ne</span> <span class="n">hy</span> <span class="n">c_zero</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∉</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">≤</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">false</span>

<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">intros</span> <span class="n">hy</span><span class="o">,</span> <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_preimage</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_singleton_iff</span><span class="o">]</span> <span class="n">at</span> <span class="err">⊢</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="o">(</span><span class="n">f_simp</span> <span class="n">y</span><span class="o">)</span>  <span class="bp">=</span> <span class="o">(</span><span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="n">y</span><span class="o">),</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span> <span class="n">rw</span> <span class="n">f_simp_to_fun</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[],</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="o">},</span> <span class="n">rw</span> <span class="n">set1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">then $x\times\mathrm{vol}(f^{-1}(\{x\}))=c\times(b-a)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">real</span><span class="bp">.</span><span class="n">volume_Icc</span><span class="o">,</span> <span class="n">apply</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">mul_lt_top</span><span class="o">,</span> <span class="n">rw</span> <span class="n">lt_top_iff_ne_top</span><span class="o">,</span> <span class="n">exact</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_ne_top</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">nnreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="n">lt_top_iff_ne_top</span><span class="o">,</span> <span class="n">exact</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real_ne_top</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">c_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
<span class="n">f_simp</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">simple_func</span> <span class="n">ℝ</span> <span class="n">ennreal</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">hf_simp</span> <span class="o">:</span>
  <span class="n">f_simp</span> <span class="bp">=</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span> <span class="n">measurable_sn</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">finite</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
<span class="n">f_simp_to_fun</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">to_fun</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">),</span>
<span class="n">f_simp_range</span> <span class="o">:</span> <span class="n">f_simp</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">},</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">a_1</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫⁻</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="n">a_1</span><span class="o">,</span>
<span class="n">c_zero</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">∥</span><span class="n">c</span><span class="err">∥</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">,</span>
<span class="n">hz</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">,</span>
<span class="n">set1</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">f_simp</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">{</span><span class="n">ennreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="n">c</span><span class="o">}</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">nnreal</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span> <span class="bp">&lt;</span> <span class="err">⊤</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>If forall $x\in(a,b), 0 \le f(x)\le c$ then
$$
\int_a^b f\le (b-a)c
$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">integral_le_max_times_length</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">{</span><span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> 
    <span class="o">(</span><span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> 
    <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This is a simple application of previous lemma</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">ineq1</span> <span class="o">:=</span> <span class="n">integral_le_integral&#39;</span> <span class="n">f</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">c</span><span class="o">))</span> <span class="n">a</span> <span class="n">b</span> <span class="n">h</span> <span class="bp">_</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">triv1</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
<span class="n">triv1</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
<span class="n">triv1</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">same_integral&#39;&#39;</span><span class="o">,</span> <span class="n">intros</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">],</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
<span class="n">triv1</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">triv1</span> <span class="n">at</span> <span class="n">ineq1</span><span class="o">,</span> <span class="n">rw</span> <span class="n">integral_constant</span> <span class="n">at</span> <span class="n">ineq1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">ineq1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
<span class="n">triv1</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Then we prove that $f$ and $c 1_{(a,b)}$ is measurable and integrable.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span> <span class="n">apply</span> <span class="n">measurable</span><span class="bp">.</span><span class="k">if</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_measurable_Icc</span><span class="o">,</span> <span class="n">exact</span> <span class="n">measurable_const</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span>
    <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span> <span class="bp">∧</span>
      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">exact</span> <span class="n">measurable_zero</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">integrable_const_Icc</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">ineq1</span> <span class="o">:=</span> <span class="n">f_nonneg</span> <span class="n">a</span> <span class="bp">_</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">ineq2</span> <span class="o">:=</span> <span class="n">c_max</span> <span class="n">a</span> <span class="bp">_</span><span class="o">,</span> <span class="n">exact</span> <span class="n">le_trans</span> <span class="n">ineq1</span> <span class="n">ineq2</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">left_mem_Icc</span><span class="o">],</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">left_mem_Icc</span><span class="o">],</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">and that for any $x\in(a,b)$, $f x \le c 1_{(a,b)}(x)=c$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="n">c_max</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">exact</span> <span class="n">f_nonneg</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">f_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">c_max</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">c</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$$
\frac{\mathrm{d}\exp(t-x)}{\mathrm{d}x}=-\exp(t-x)
$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">deriv_exp_t_x</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$$
\frac{\mathrm{d}-\exp(t-x)}{\mathrm{d}x}=\exp(t-x)
$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">deriv_exp_t_x&#39;</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">-</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">))))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">))</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_exp_t_x</span><span class="o">,</span> <span class="n">deriv_neg&#39;</span><span class="o">,</span> <span class="n">pi</span><span class="bp">.</span><span class="n">neg_apply</span><span class="o">,</span> <span class="n">neg_neg</span><span class="o">]</span>
<span class="c">/-</span><span class="cm">-</span>
<span class="cm"># about I</span>
<span class="cm">-/</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      Suppose $f$ is an integer polynomial with degree $n$ and $t\ge0$ then define
    \[I(f,t):=\int_0^t \exp(t-x)f(z)\mathrm{d}x\]
We use integration by parts to prove
    \[I(f,t)=\exp(t)\left(\sum_{i=0}^n f^{(i)}(0)\right)-\sum_{i=0}^n f^{(i)}(t)\]

The two different ways of representing $I(f,t)$ we give us upper bound and lower bound when we are using this on transcendence of $e$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">I</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="o">:=</span> 
    <span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">-</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="n">t</span><span class="o">))</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$I(0,t)$ is 0.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_0</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">II</span> <span class="mi">0</span> <span class="n">t</span> <span class="n">ht</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We are integrating $\exp(t-x)\times 0$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">II</span><span class="o">,</span> <span class="n">unfold</span> <span class="n">f_eval_on_ℝ</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator_zero</span><span class="o">,</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral_zero</span><span class="o">,</span> <span class="n">mul_zero</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">eval_zero</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">map_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">II</span> <span class="mi">0</span> <span class="n">t</span> <span class="n">ht</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>By integration by part we have:</p>
<p>
\[I(f, t) = e^tf(0)-f(t)+I(f',t)\]
</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_integrate_by_part</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> 
    <span class="o">(</span><span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We have $$\int_0^t \exp(t-x)f(x)\mathrm{d}x=\int_0^t f(x)\frac{\mathrm{d}}{\mathrm{d}x}(-\exp(t-x))\mathrm{d}x$$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">eq</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">-</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">)))</span> <span class="n">x</span><span class="o">)),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">same_integral</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_exp_t_x&#39;</span><span class="o">],</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Apply integration by part to $$\int_0^t f(x)\frac{\mathrm{d}}{\mathrm{d}x}(-\exp(t-x))\mathrm{d}x$$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">replace</span> <span class="n">eq</span> <span class="o">:=</span> <span class="n">integrate_by_part</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span><span class="o">)</span> <span class="mi">0</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mul_one</span><span class="o">,</span> <span class="n">neg_sub_neg</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp_zero</span><span class="o">,</span> <span class="n">sub_zero</span><span class="o">,</span> <span class="n">mul_neg_eq_neg_mul_symm</span><span class="o">,</span> <span class="n">sub_self</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">-</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">((</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span><span class="o">))</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">-</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">-</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">-</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">same_integral</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="mi">0</span> <span class="bp">-</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">-</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">-</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span> <span class="n">rw</span> <span class="n">integral_neg&#39;</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">sub_neg_eq_add</span><span class="o">],</span> <span class="n">rw</span> <span class="n">II</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">-</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span> <span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
       <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">+</span>
      <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">same_integral</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span> <span class="n">rw</span> <span class="n">f_eval_on_ℝ</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">derivative_emb</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">deriv</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">same_deriv</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">rw</span> <span class="n">f_eval_on_ℝ</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="err">⊢</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="bp">-</span><span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">))</span> <span class="n">x</span> <span class="bp">=</span>
    <span class="n">deriv</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Combine the theorem above with induction we get for all $m\in\mathbb N$</p>
<p>
\[
I(f,t)=e^t\sum_{i=0}^m f^{(i)}(0)-\sum_{i=0}^m f^{(i)}(t)
\]

</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_integrate_by_part_m</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span> <span class="bp">=</span> <span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">-</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">II</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>So the using if $f$ has degree $n$, then $f^{(n+1)}$ is zero we have the two definition of $I(f,t)$ agrees.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_eq_I</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span> <span class="bp">=</span> <span class="n">I</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>
\[\left|I(f,t)\right|\le \int_0^t \left|e^{t-x}f(x)\right|\mathrm{d}x\]



</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">abs_II_le1</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">((</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>By our construction the $n$-th coefficient of $\bar{f}$ is the absolute value of $n$-th coefficient of $f$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">bar_coeff</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">true by definition</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">dsimp</span> <span class="o">[</span><span class="n">f_bar</span><span class="o">],</span> <span class="n">refl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>By our construction, $\bar{f}$ and $f$ has the same support</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">bar_supp</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">true by definition</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">dsimp</span> <span class="o">[</span><span class="n">f_bar</span><span class="o">],</span> <span class="n">refl</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Since $\bar{f}$ and $f$ has the same support, they have the same degree.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">bar_same_deg</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">degree is defined to be $\sup$ of support. Since support of $\bar{f}$ and $f$ are the same, their degree is the same.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">degree</span><span class="o">,</span> <span class="n">rw</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">degree</span><span class="o">,</span> <span class="n">rw</span> <span class="n">bar_supp</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">degree</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">degree</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$\bar{0}=0$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">f_bar_0</span> <span class="o">:</span> <span class="n">f_bar</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>for any $f\in\mathbb Z$, if $\bar{f}=0$ then $f=0$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">f_bar_eq_0</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f_bar</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">-&gt;</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>For any $x\in(0,t)$
$|f(x)|\le \bar{f}(t)$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">f_bar_ineq</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">If we write $f(X)=a_0+a_1X+\cdots+a_nX^n$. Then $f(x)=a_0+a_1x+\cdots+a_nx^n$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="o">[</span><span class="n">f_eval_on_ℝ</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">eval_map</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">eval₂</span><span class="o">,</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">sum</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">⇑</span><span class="bp">ℤ</span><span class="n">embℝ</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">a</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">norm_cast</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">⇑</span><span class="bp">ℤ</span><span class="n">embℝ</span> <span class="o">(</span><span class="err">⇑</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">a</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">lhs</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">So $|f(x)|=|a_0+a_1x+\cdots+a_nx^n|\le |a_0|+|a_1|x+\cdots+|a_n|x^n$. (We assumed $x\ge0$).</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="o">(</span><span class="n">abs</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">we have $|a_0+a_1x+\cdots+a_nx^n|\le|a_0|+|a_1x|+\cdots+|a_nx^n|$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">ineq1&#39;</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">finset</span><span class="bp">.</span><span class="n">abs_sum_le_sum_abs</span> <span class="n">ℝ</span> <span class="bp">ℕ</span> <span class="bp">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">))</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[]</span> <span class="n">at</span> <span class="n">ineq1&#39;</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">and $|a_0|+|a_1x|+\cdots+|a_nx^n|=|a_0|+|a_1|x+\cdots+|a_n|x^n$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">eq1</span> <span class="o">:</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">),</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">),</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">rw</span> <span class="n">abs_mul</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">),</span>
<span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">rw</span> <span class="bp">@</span><span class="n">abs_of_nonneg</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="o">(</span><span class="n">x</span><span class="bp">^</span><span class="n">x_1</span><span class="o">)</span> <span class="bp">_</span><span class="o">,</span> <span class="n">apply</span> <span class="n">pow_nonneg</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">),</span>
<span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">),</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">eq1</span> <span class="n">at</span> <span class="n">ineq1&#39;</span><span class="o">,</span> <span class="n">exact</span> <span class="n">ineq1&#39;</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1&#39;</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">),</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">$\bar{f}(t)=|a_0|+|a_1|t+\cdots+|a_n|t^n$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="o">[</span><span class="n">f_eval_on_ℝ</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">eval_map</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">eval₂</span><span class="o">,</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">sum</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">⇑</span><span class="bp">ℤ</span><span class="n">embℝ</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">a</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">norm_cast</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">⇑</span><span class="bp">ℤ</span><span class="n">embℝ</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">a</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">rhs</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $x^i\le t^i$, we have $|a_0|+|a_1|x+\cdots+|a_n|x^n\le|a_0|+|a_1|t+\cdots+|a_n|t^n$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">ineq2</span> <span class="o">:</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>  <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">bar_supp</span><span class="o">,</span> <span class="n">apply</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_le_sum</span><span class="o">,</span> <span class="n">intros</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">suffices</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">mul_le_mul</span><span class="o">,</span> <span class="n">exact</span> <span class="n">le_refl</span> <span class="o">(</span><span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">f</span> <span class="n">n</span><span class="o">)),</span> <span class="n">exact</span> <span class="n">this</span><span class="o">,</span> <span class="n">apply</span> <span class="n">pow_nonneg</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">abs_nonneg</span> <span class="err">↑</span><span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">f</span> <span class="n">n</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">pow_le_pow_of_le_left</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">combine <code>ineq1</code> and <code>ineq2</code> we are done.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">exact</span> <span class="n">le_trans</span> <span class="n">ineq1</span> <span class="n">ineq2</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">lhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">rhs</span> <span class="o">:</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">,</span> <span class="n">abs</span> <span class="err">↑</span><span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">t</span> <span class="bp">^</span> <span class="n">i</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">$|e^{t-x}f(x)|$ is composition of absolute value function and $e^{t-x}f(x)$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">eq1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">abs</span> <span class="err">∘</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">],</span> <span class="n">rw</span> <span class="n">eq1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We know that absolute value function is continuous.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">cont1</span> <span class="o">:=</span> <span class="n">real</span><span class="bp">.</span><span class="n">continuous_abs</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We now prove that $e^{t-x}f(x)$ is continuous by proving $e^{t-x}$ and $f(x)$ are continuous.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">cont2</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">),</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">cont2</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">cont2</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">$e^{t-x}$ is composition of $\exp$ and $t-x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">)),</span> <span class="n">rw</span> <span class="n">eq2</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">$\exp$ is continuous</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">cont20</span> <span class="o">:=</span> <span class="n">real</span><span class="bp">.</span><span class="n">continuous_exp</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">$t-x$ is the constant function $t$ minus the identity function</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">eq3</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">),</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">id</span><span class="o">],</span> <span class="n">rw</span> <span class="n">eq3</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">eq3</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">constant function is continuous</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">cont3</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span> <span class="o">:</span><span class="n">ℝ</span><span class="o">,</span> <span class="n">t</span><span class="o">),</span> <span class="n">exact</span> <span class="n">continuous_const</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">eq3</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">eq3</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont3</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">identity function is continuous</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">cont3&#39;</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">@</span><span class="n">id</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">exact</span> <span class="n">continuous_id</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">eq3</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont3</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">eq3</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont3</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">),</span>
<span class="n">cont3&#39;</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">id</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">hence $t-x$ is continuous</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">cont33</span> <span class="o">:=</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">sub</span> <span class="n">cont3</span> <span class="n">cont3&#39;</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">eq3</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont3</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">),</span>
<span class="n">cont3&#39;</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">id</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span><span class="o">)</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">id</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">hence $e^{t-x}$ is continuous</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">exact</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">cont20</span> <span class="n">cont201</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont20</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
<span class="n">cont201</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">evaluating a polynomial is continuous</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">cont4</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">,</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)),</span>
<span class="n">cont4</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">unfold</span> <span class="n">f_eval_on_ℝ</span><span class="o">,</span> <span class="n">exact</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">continuous</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">map</span> <span class="bp">ℤ</span><span class="n">embℝ</span> <span class="n">f</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)),</span>
<span class="n">cont4</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)),</span>
<span class="n">cont4</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">hence the product is continuous</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">exact</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">mul</span> <span class="n">cont21</span> <span class="n">cont4</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">eq2</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont21</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)),</span>
<span class="n">cont4</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">cont2</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">exact</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">cont1</span> <span class="n">cont2</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">eq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cont1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">abs</span><span class="o">,</span>
<span class="n">cont2</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">abs</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$$
\int_0^t |e^{t-x}f(d)|\mathrm{d}x\le te^t\bar{f}(t)
$$</p>
<pre><code>  
  
</code></pre>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">private</span> <span class="kn">lemma</span> <span class="n">II_le2&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">((</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">we are using <code>integral_le_max_times_length</code> so we need to prove $|e^{t-x}f(x)|\le e^t\bar{f}(t)$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">ineq1</span> <span class="o">:=</span> <span class="n">integral_le_max_times_length</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">abs</span> <span class="o">((</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="mi">0</span> <span class="n">t</span> <span class="n">ht</span> <span class="o">(</span><span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
       <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
       <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">sub_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">ineq1</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
       <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
       <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span>
    <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">triv0</span> <span class="o">:</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">),</span>
<span class="n">triv0</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">),</span>
<span class="n">triv0</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">apply</span> <span class="n">same_integral&#39;</span><span class="o">,</span> <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">,</span> <span class="n">h</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">triv0</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">),</span>
<span class="n">triv0</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">),</span>
<span class="n">triv0</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">),</span>
<span class="n">triv0</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">),</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">triv</span> <span class="n">at</span> <span class="n">ineq1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">ineq1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">ineq1</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">),</span>
<span class="n">triv0</span> <span class="o">:</span>
  <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">=</span>
    <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">),</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral</span>
      <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))))</span> <span class="bp">≤</span>
    <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">This to provve the functions we used are measurable and integrable.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">∧</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">apply</span> <span class="n">measurable</span><span class="bp">.</span><span class="n">measurable_on</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_measurable_Icc</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove $|e^{t-x}f(x)|$ is continuous and thus measurable.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">apply</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">measurable</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">exact</span> <span class="n">continuous_exp_f</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">To prove $e^{t-x}f(x)$ is integrable on $[0,t]$ we use that $[0,t]$ is compact so a maximum of $e^{t-x}f(x)$ exists.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="k">have</span> <span class="n">hmax</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">compact</span><span class="bp">.</span><span class="n">exists_forall_ge</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">compact_Icc</span><span class="o">)</span> <span class="o">(</span><span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="k">begin</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">left_mem_Icc</span><span class="o">],</span> <span class="n">exact</span> <span class="n">ht</span> <span class="kn">end</span><span class="bp">⟩</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">_</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">),</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">y</span> <span class="bp">≤</span>
        <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">choose</span> <span class="n">max</span> <span class="n">hmax</span> <span class="kn">using</span> <span class="n">hmax</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">),</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">y</span> <span class="bp">≤</span>
        <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Let $M$ be $e^{t-max}f(max)$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">generalize</span> <span class="n">hM</span> <span class="o">:</span>  <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We compare the function with the constant function $M$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">set</span> <span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">M</span><span class="o">)</span> <span class="k">with</span> <span class="n">hbound</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">apply</span> <span class="bp">@</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable_of_integrable_bound</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span> <span class="n">bound</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)))</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">bound</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">as proved before, constant functions are integrable on closed interval.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">simp</span> <span class="o">[</span><span class="n">hbound</span><span class="o">],</span> <span class="n">apply</span> <span class="n">integrable_const_Icc</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">bound</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">M</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">hM</span><span class="o">,</span> <span class="n">exact</span> <span class="n">abs_nonneg</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span> <span class="n">exact</span> <span class="n">ht</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">M</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Now we prove that $M$ is indeed a bound.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">suffices</span> <span class="o">:</span>  <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">this</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">exact</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">ae_of_all</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span> <span class="n">this</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">this</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>
<span class="err">⊢</span> <span class="bp">∀</span><span class="err">ᶠ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span>
    <span class="n">measure_theory</span><span class="bp">.</span><span class="n">measure_space</span><span class="bp">.</span><span class="n">volume</span><span class="bp">.</span><span class="n">ae</span><span class="o">,</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">intros</span> <span class="n">y</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hbound</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">],</span> <span class="n">rw</span> <span class="n">real</span><span class="bp">.</span><span class="n">norm_eq_abs</span><span class="o">,</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">rw</span> <span class="n">abs_abs</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="err">∥</span><span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">a</span><span class="err">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">a</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">M</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">hM</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hmax</span><span class="bp">.</span><span class="mi">2</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">abs_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">M</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">max</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hmax</span> <span class="o">:</span>
  <span class="n">max</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">∧</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">y</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
      <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">),</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hM</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">max</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">max</span><span class="o">)</span> <span class="bp">=</span> <span class="n">M</span><span class="o">,</span>
<span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">hbound</span> <span class="o">:</span> <span class="n">bound</span> <span class="bp">=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">M</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>      <span class="n">exact</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">continuous_on</span> <span class="o">(</span><span class="n">continuous_exp_f</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">This is to prove $0\le|e^{t-x}f(x)|$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ge_iff_le</span><span class="o">],</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">],</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">exact</span> <span class="n">abs_nonneg</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">exact</span> <span class="n">abs_nonneg</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">This is to prove $|e^{t-x}f(x)|\le e^t \bar{f}(t)$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">],</span> <span class="n">split_ifs</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span> <span class="bp">→</span>
    <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="n">x</span> <span class="bp">≤</span>
      <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">abs_mul</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">=</span> <span class="o">(</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span> <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">abs_of_pos</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp_pos</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We have $|f(x)|\le\bar{f}(t)$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">ineq1</span> <span class="o">:=</span> <span class="n">f_bar_ineq</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We have $e^{t-x}\le e^{t}$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">ineq2</span> <span class="o">:</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">≤</span> <span class="n">t</span><span class="bp">.</span><span class="n">exp</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">rw</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp_le_exp</span><span class="o">,</span> <span class="n">rw</span> <span class="n">sub_le</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">sub_self</span><span class="o">],</span> <span class="n">exact</span> <span class="n">hx</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">exact</span> <span class="n">mul_le_mul</span> <span class="n">ineq2</span> <span class="n">ineq1</span> <span class="o">(</span><span class="n">abs_nonneg</span> <span class="bp">_</span><span class="o">)</span> <span class="o">(</span><span class="n">le_of_lt</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp_pos</span> <span class="n">t</span><span class="o">)),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ineq1</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">,</span>
<span class="n">ineq2</span> <span class="o">:</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span>
<span class="err">⊢</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">not_and</span><span class="o">,</span> <span class="n">not_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">t</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">rid1</span> <span class="o">:=</span> <span class="n">h</span> <span class="n">hx</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="k">have</span> <span class="n">rid2</span> <span class="o">:=</span> <span class="n">hx</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="o">(</span><span class="n">t</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$$|I(f,t)|\le te^t\bar{f}(t)$$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">abs_II_le2</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">combine <code>abs_II_le1</code> and previous lemma.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">exact</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">abs_II_le1</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="o">(</span><span class="n">II_le2&#39;</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">abs</span> <span class="o">(</span><span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">f_bar</span> <span class="n">f</span><span class="o">)</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
</div>
<div id="dragbar"></div>
<div id="tactic_state_wrapper">
  <h1 id="tactic_state_header">Tactic state</h1>
<div id="tactic_state">
</div>
</div>
</div>

<script src="jquery.min.js" type="text/javascript"></script>

<script src="jquery.min.js" type="text/javascript"></script>

<script src="lean.js" type="text/javascript"></script>

</body>
</html>
